<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Simulado Biomedicina — Estilo Windows XP</title>
<style>
  :root{--bg:#cfe6ff;--taskbar:#0b67c2;--title:#012a66;--panel:#e9f4ff}
  html,body{height:100%;margin:0;font-family: Tahoma, Arial, sans-serif;background:linear-gradient(#d8ebff,#bfe0ff);color:#000}
  .window{width:900px;margin:30px auto;border:3px solid #8fb0d6;border-radius:6px;background:var(--panel);box-shadow:0 8px 20px rgba(0,0,0,0.25)}
  .titlebar{background:linear-gradient(#0b67c2,#054a9a);color:#fff;padding:8px;border-top-left-radius:3px;border-top-right-radius:3px;display:flex;align-items:center}
  .titlebar .icon{width:18px;height:18px;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect width="64" height="64" rx="6" fill="%23ffffff"/></svg>') no-repeat center/contain;margin-right:8px}
  .titlebar h1{font-size:14px;margin:0;flex:1}
  .titlebar .controls{font-size:12px}
  .content{padding:18px}
  .question{background:#fff;border:1px solid #c2d6ee;padding:14px;border-radius:4px;margin-bottom:12px}
  .opts{margin-top:8px}
  .opts label{display:block;padding:8px;border-radius:4px;border:1px solid transparent;margin-bottom:6px;cursor:pointer}
  .opts input{margin-right:8px}
  .opts label:hover{background:#eef6ff;border-color:#b7d6ff}
  .controls-row{display:flex;gap:8px;align-items:center;margin-bottom:12px}
  button{padding:8px 12px;border-radius:4px;border:1px solid #6b8bb0;background:linear-gradient(#e9f4ff,#d0e8ff);cursor:pointer}
  button.primary{background:linear-gradient(#ffd36b,#ffb84d);border-color:#b57a1f}
  .progress{height:14px;background:#d9eefe;border-radius:7px;overflow:hidden;border:1px solid #b9d6f0}
  .progress > i{display:block;height:100%;background:linear-gradient(#7fb7ff,#3f8ef2);width:0%}
  .footer{background:var(--taskbar);color:#fff;padding:8px;border-bottom-left-radius:3px;border-bottom-right-radius:3px;display:flex;align-items:center}
  .start{background:linear-gradient(#ffefb8,#ffd36b);padding:6px 10px;border-radius:4px;margin-right:10px;color:#000;font-weight:bold}
  .hidden{display:none}
  .center{text-align:center}
  .danger{color:#a00;font-weight:bold}
  textarea{width:100%;height:120px}
  @media(max-width:960px){.window{width:95%;}}
</style>
</head>
<body>
<div class="window" id="app">
  <div class="titlebar"><div class="icon"></div><h1>Simulado — Biomedicina (Estilo Windows XP)</h1><div class="controls">v1.0</div></div>
  <div class="content">
    <div id="intro">
      <p>Prova: 50 questões (mistura de vestibular e concursos públicos para Biomedicina). As respostas ficam ocultas até o envio. Trocar de aba, minimizar ou tentar inspecionar a página encerra a sessão e apaga os dados (medida anti-cola).</p>
      <div class="controls-row">
        <label>Nome do(a) candidato(a): <input id="candidate" type="text"></label>
        <button id="startBtn" class="primary">Iniciar Avaliação</button>
        <button id="loadSample">Carregar Amostra</button>
      </div>
      <div class="center"><small class="danger">Atenção: proteções do navegador não são infalíveis — use para treino.</small></div>
    </div>

    <div id="quiz" class="hidden">
      <div class="controls-row">
        <div style="flex:1">
          <div class="progress" aria-hidden><i id="prog"></i></div>
        </div>
        <div id="qcount">Questão 0 / 50</div>
      </div>

      <form id="form">
        <div id="questionsContainer"></div>
      </form>

      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="prev">Anterior</button>
        <button id="next">Próxima</button>
        <button id="submit" class="primary">Enviar Avaliação</button>
      </div>
    </div>

    <div id="result" class="hidden">
      <h2>Resultado</h2>
      <div id="score"></div>
      <details>
        <summary>Mostrar questões e respostas</summary>
        <div id="answers"></div>
      </details>
      <div style="margin-top:12px"><button id="restart">Refazer</button></div>
    </div>
  </div>
  <div class="footer"><div class="start">Iniciar</div><div>Use apenas para estudo. Fontes e temas baseados em provas e bancos de vestibular e concursos (FGV, VUNESP, CEBRASPE, CESGRANRIO, IFs).</div></div>
</div>

<script>
// Proteções (melhor esforço)
(function(){
  window.addEventListener('keydown', function(e){
    if(e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key==='I' || e.key==='J')) || (e.ctrlKey && e.key==='u')){ e.preventDefault(); e.stopPropagation(); clearSessionAndKill(); }
    if(e.ctrlKey && (e.key==='s' || e.key==='p')){ e.preventDefault(); }
  }, true);
  window.addEventListener('contextmenu', function(e){ e.preventDefault(); clearSessionAndKill(); }, true);
  document.addEventListener('visibilitychange', function(){ if(document.hidden){ clearSessionAndKill(); } });
  window.addEventListener('beforeunload', function(e){ clearStorage(); var msg='Se você sair, tudo será apagado.'; e.returnValue = msg; return msg; });
  try{ console.log = function(){}; console.warn = function(){}; }catch(e){}
  function clearStorage(){ try{ sessionStorage.clear(); localStorage.removeItem('simulado:bio'); }catch(e){} }
  function clearSessionAndKill(){ clearStorage(); try{ document.documentElement.innerHTML = '<body style="display:flex;align-items:center;justify-content:center;height:100vh;background:#fff"><div style="text-align:center;padding:20px;border:1px solid #ccc;border-radius:6px">Sessão encerrada por violação das regras de segurança.<br>Atualize para reiniciar.</div></body>'; }catch(e){} }
  window._clearSessionAndKill = clearSessionAndKill;
})();

// 50 questões — Biomedicina (vestibular + concursos)
const questions = [
  {q:'Qual é a unidade funcional básica dos organismos vivos?', opts:['Célula','Molécula','Tecido','Órgão'], a:0},
  {q:'Em bioquímica, a ligação peptídica ocorre entre:', opts:['Aminoácidos','Nucleotídeos','Glicerol e ácidos graxos','Monossacarídeos'], a:0},
  {q:'Qual organela é responsável pela produção de ATP em eucariotos?', opts:['Mitocôndria','Ribossomo','Lisossomo','Retículo endoplasmático'], a:0},
  {q:'Em genética, alelos são:', opts:['Formas alternativas de um mesmo gene','Genes em cromossomos diferentes','Proteínas codificadas','Produtos metabólicos'], a:0},
  {q:'Qual é a função principal dos ribossomos?', opts:['Síntese de proteínas','Produção de energia','Digestão intracelular','Armazenamento de lipídios'], a:0},
  {q:'Em microbiologia, bactérias Gram-positivas possuem:', opts:['Peptidoglicano espesso na parede celular','Membrana externa rica em lipopolissacarídeos','Parede celular com quitina','Ausência de parede celular'], a:0},
  {q:'Qual é o principal método para esterilização de materiais cirúrgicos?', opts:['Autoclavação (vapor sob pressão)','Lavagem com água e sabão','Exposição ao sol','Uso de álcool a 70% apenas'], a:0},
  {q:'Em parasitologia, Taenia saginata é um exemplo de:', opts:['Cestode (tênia)','Nematode','Trematode','Protozoário'], a:0},
  {q:'Qual exame é usado para identificar hemácias fragmentadas (esquizócitos)?', opts:['Hemograma com esfregaço de sangue periférico','PCR','ECG','Radiografia torácica'], a:0},
  {q:'Em imunologia, anticorpos são produzidos por:', opts:['Plasmócitos (células B diferenciadas)','Macrófagos','Neutrófilos','Células T citotóxicas'], a:0},
  {q:'Qual vitamina é essencial para a coagulação sanguínea (via síntese hepática de fatores)?', opts:['Vitamina K','Vitamina C','Vitamina D','Vitamina B12'], a:0},
  {q:'Em bioquímica, enzimas são principalmente:', opts:['Catalisadores biológicos (proteínas)','Ácidos nucleicos','Lipídios','Glicídios'], a:0},
  {q:'Qual técnica molecular é utilizada para amplificar DNA in vitro?', opts:['Reação em Cadeia da Polimerase (PCR)','Eletroforese em gel','Western blot','Espectrometria de massa'], a:0},
  {q:'Em microbiologia, o teste de sensibilidade aos antimicrobianos mais comum é:', opts:['Difusão em disco (Kirby-Bauer)','Teste de ELISA','Hemocultura isolada','Sequenciamento genômico'], a:0},
  {q:'Qual elemento indica orientação do DNA (cadeia) em nucleotídeos?', opts:['A ligação entre o carbono 3\' e 5\' (3\'-5\')','Ligação 2\'-4\'','Ligação peptídica','Ligação fosfodiéster 1\'-1\''], a:0},
  {q:'Em fisiologia, qual estrutura é responsável pela filtração do sangue nos rins?', opts:['Glomérulo','Alvéolo','Ventrículo cardíaco','Hepatócito'], a:0},
  {q:'Qual tipo de tecido compõe a maior parte do cérebro?', opts:['Tecido nervoso','Tecido muscular','Tecido conjuntivo','Tecido epitelial'], a:0},
  {q:'Em hematologia, reticulócitos são:', opts:['Precursores imaturos de hemácias','Leucócitos especializados','Plaquetas grandes','Células do sistema reticuloendotelial'], a:0},
  {q:'Qual é o principal vetor da doença de Chagas no Brasil?', opts:['Triatomíneos (barbeiros)','Anopheles','Aedes aegypti','Culex quinquefasciatus'], a:0},
  {q:'Em bioética, o consentimento informado é importante porque:', opts:['Respeita a autonomia do paciente','É uma formalidade sem valor ético','Substitui a necessidade de documentação','É necessário apenas em pesquisas'], a:0},
  {q:'Qual exame laboratorial é mais apropriado para diagnosticar infecção por HIV inicialmente?', opts:['Teste rápido/ELISA para anticorpos seguido de confirmatório','Hemograma completo isolado','Urocultura','Prova de função hepática'], a:0},
  {q:'Em farmacologia, meia-vida de um fármaco representa:', opts:['Tempo para reduzir a concentração plasmática à metade','Tempo para atingir concentração máxima','Intervalo entre doses','Tempo de duração do efeito'], a:0},
  {q:'Qual é o agente etiológico da tuberculose humana?', opts:['Mycobacterium tuberculosis','Streptococcus pneumoniae','Escherichia coli','Plasmodium falciparum'], a:0},
  {q:'Em biologia molecular, RNA mensageiro (mRNA) tem por função:', opts:['Transportar informação do DNA para a síntese proteica','Atuar como catalisador principal na respiração celular','Formar membranas celulares','Armazenar lipídios'], a:0},
  {q:'Qual dos seguintes é um exame bioquímico para função renal?', opts:['Creatinina sérica','Bilirrubina','PCR para vírus','Hemoglobina glicada'], a:0},
  {q:'Em microbiologia, bacilos em forma de bastonete indicam qual morfologia?', opts:['Bacilar','Cocácea (cocos)','Espiralada (espirilos)','Pleomórfica'], a:0},
  {q:'Qual corante é usado para identificar micobactérias (Ziehl-Neelsen)?', opts:['Vermelho de fucsina (corante ácido-álcool resistente)','Safranina','Hematoxilina de Mayer','Azul de metileno somente'], a:0},
  {q:'Em parasitologia, o ciclo de Schistosoma envolve:', opts:['Caramujo como hospedeiro intermediário','Mosquitos como vetor principal','Homem como vetor','Ácaros apenas'], a:0},
  {q:'Qual é o principal método para diagnóstico laboratorial de malária?', opts:['Exame de sangue periférico por gota espessa e esfregaço','Radiografia torácica','Eletroforese de proteínas','Ressonância magnética'], a:0},
  {q:'Em imunologia, resposta imune humoral está relacionada a:', opts:['Produção de anticorpos por células B','Ativação de células T citotóxicas','Resposta mediada por barreiras mucosas somente','Inflamação inespecífica apenas'], a:0},
  {q:'Qual é o principal germe associado a endocardite infecciosa em usuários de drogas endovenosas?', opts:['Staphylococcus aureus','Neisseria meningitidis','Lactobacillus spp.','Clostridium tetani'], a:0},
  {q:'Em citologia, mitose é o processo que resulta em:', opts:['Formação de duas células-filhas geneticamente idênticas','Formação de gametas com meiose','Transcrição de RNA','Degradação de proteínas'], a:0},
  {q:'Qual corante é usado em histologia para visualizar núcleos e citoplasma (HE)?', opts:['Hematoxilina e eosina','Violeta de gentiana','Azul de toluidina','Prata amoniacal'], a:0},
  {q:'Em microbiologia clínica, contaminação de amostras de cultura pode causar:', opts:['Falsos positivos/interpretacões errôneas','Melhor sensibilidade do teste','Aumento do valor preditivo negativo','Nenhum impacto'], a:0},
  {q:'Qual é a principal via de transmissão do vírus da hepatite B?', opts:['Sangue e fluidos corporais','Água contaminada','Alimentos malcozidos','Picada de inseto'], a:0},
  {q:'Em bioquímica, glicólise ocorre no:', opts:['Citosol','Mitocôndria','Lisossomo','Ribossomo'], a:0},
  {q:'Qual exame detecta anticorpos específicos e é usado em imunodiagnóstico?', opts:['ELISA','Eletrocardiograma','Gasometria arterial','USG abdominal'], a:0},
  {q:'Em parasitologia, protozoários são classificados como:', opts:['Organismos unicelulares eucariotos','Bactérias Gram-negativas','Vírus de RNA','Metazoários multicelulares'], a:0},
  {q:'Qual é o principal órgão envolvido na homeostase de glicose?', opts:['Fígado','Rim','Pulmão','Tireoide'], a:0},
  {q:'Em citometria de fluxo, qual parâmetro é comumente avaliado?', opts:['Populações celulares e marcadores de superfície','Níveis de glicose plasmática','Função hepática completa','Conteúdo mineral ósseo'], a:0},
  {q:'Qual fator é mais importante para manter a integridade de amostras biológicas para diagnóstico?', opts:['Temperatura e tempo até processamento','Cor do frasco','Nome do paciente apenas','Hora do dia da coleta'], a:0},
  {q:'Em genética, mutações pontuais são:', opts:['Substituições de uma base por outra','Perda de cromossomo inteiro','Amplificação de todo o genoma','Recombinação gênica extensa'], a:0},
  {q:'Qual técnica permite identificação de proteínas por massa e carga?', opts:['Eletroforese e espectrometria de massa','PCR em tempo real','Sequenciamento Sanger','Hibridização in situ'], a:0},
  {q:'Em epidemiologia, incidência refere-se a:', opts:['Número de casos novos em um período especificado','Número total de casos existentes','Proporção de recuperação','Taxa de mortalidade apenas'], a:0},
  {q:'Qual biossegurança é recomendada para manipular agentes de alto risco (classe 3)?', opts:['Cabine de segurança biológica de classe II/III e medidas de contenção apropriadas','Uso apenas de luvas simples','Trabalho em bancada aberta','Nenhuma proteção necessária'], a:0},
  {q:'Em farmacologia, biodisponibilidade refere-se a:', opts:['Fraçãodo fármaco que alcança a circulação sistêmica','Volatilidade do fármaco','Toxicidade intrínseca','Tempo de meia-vida apenas'], a:0},
  {q:'Qual exame é indicado para avaliar função hepática de forma rotineira?', opts:['TGO/TGP (AST/ALT)','Hemograma','Gasometria','PCR polimerase'], a:0},
  {q:'Em técnicas de laboratório, PCR em tempo real (qPCR) permite:', opts:['Quantificação relativa ou absoluta de material genético durante a amplificação','Apenas amplificação final visível em gel','Substituir totalmente cultura de microrganismos','Medir pressão arterial'], a:0},
  {q:'Qual é o papel dos linfócitos T auxiliares (CD4+)?', opts:['Orquestrar respostas imunes e ativar outras células imunes','Produzir anticorpos diretamente','Fagocitar bactérias grandes','Gerar energia para os órgãos'], a:0},
  {q:'Em histopatologia, neoplasia maligna é caracterizada por:', opts:['Invasão local e potencial metastático','Crescimento organizado e limitado','Reversibilidade completa','Ausência de mitoses'], a:0},
  {q:'Qual medida é mais eficaz na prevenção de infecções nosocomiais?', opts:['Higiene das mãos e protocolos de controle de infecção','Apenas uso de antibióticos profiláticos','Fechamento do setor de internação','Apenas isolamento universal sem higiene'], a:0}
];

// App logic
let state = { idx:0, answers: Array(questions.length).fill(null), started:false };
const candidateInput = document.getElementById('candidate');
const startBtn = document.getElementById('startBtn');
const loadSample = document.getElementById('loadSample');
const intro = document.getElementById('intro');
const quiz = document.getElementById('quiz');
const questionsContainer = document.getElementById('questionsContainer');
const qcount = document.getElementById('qcount');
const prog = document.getElementById('prog');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const submitBtn = document.getElementById('submit');
const result = document.getElementById('result');
const scoreEl = document.getElementById('score');
const answersEl = document.getElementById('answers');
const restartBtn = document.getElementById('restart');

function start(){
  const name = candidateInput.value.trim();
  if(!name){ alert('Informe o nome do(a) candidato(a) antes de iniciar.'); return; }
  state.started=true; sessionStorage.setItem('simulado:started','1');
  intro.classList.add('hidden'); quiz.classList.remove('hidden'); renderQuestion(0);
}

function renderQuestion(i){
  state.idx = i; const Q = questions[i];
  qcount.textContent = `Questão ${i+1} / ${questions.length}`;
  prog.style.width = `${Math.round(((i)/questions.length)*100)}%`;
  questionsContainer.innerHTML = '';
  const d = document.createElement('div'); d.className='question';
  d.innerHTML = `<strong>${i+1}. ${escapeHtml(Q.q)}</strong>`;
  const opts = document.createElement('div'); opts.className='opts';
  Q.opts.forEach((o,idx)=>{
    const id = `q${i}_opt${idx}`;
    const lab = document.createElement('label');
    lab.htmlFor = id; lab.innerHTML = `<input type="radio" name="q${i}" id="${id}" value="${idx}" ${state.answers[i]===idx? 'checked':''}> ${escapeHtml(o)}`;
    opts.appendChild(lab);
  });
  d.appendChild(opts);
  questionsContainer.appendChild(d);
  opts.querySelectorAll('input').forEach(inp=> inp.addEventListener('change', function(){ state.answers[i]=parseInt(this.value); persist(); }));
  updateButtons();
}

function updateButtons(){ prevBtn.disabled = state.idx===0; nextBtn.disabled = state.idx===questions.length-1; }
prevBtn.addEventListener('click', ()=>{ if(state.idx>0) renderQuestion(state.idx-1); });
nextBtn.addEventListener('click', ()=>{ if(state.idx < questions.length-1) renderQuestion(state.idx+1); });

submitBtn.addEventListener('click', function(e){ e.preventDefault(); if(!confirm('Enviar avaliação e revelar respostas?')) return; grade(); });
restartBtn.addEventListener('click', ()=>{ location.reload(); });
startBtn.addEventListener('click', start);
loadSample.addEventListener('click', ()=>{ candidateInput.value='Candidato Exemplo'; start(); });

function grade(){
  const qs = questions; let correct=0; const details=[];
  for(let i=0;i<qs.length;i++){
    const ans = state.answers[i]; const ok = ans===qs[i].a; if(ok) correct++; details.push({q:qs[i].q, opts:qs[i].opts, a:qs[i].a, given:ans});
  }
  quiz.classList.add('hidden'); result.classList.remove('hidden'); scoreEl.innerHTML = `<p>Pontuação: ${correct} / ${qs.length} (${Math.round(correct/qs.length*100)}%)</p>`;
  answersEl.innerHTML = details.map((d,i)=>{
    const given = (d.given===null)? '---' : d.opts[d.given];
    return `<div style="margin-bottom:8px"><strong>${i+1}. ${escapeHtml(d.q)}</strong><br>Resposta correta: <em>${escapeHtml(d.opts[d.a])}</em><br>Sua resposta: ${escapeHtml(given)}</div>`;
  }).join('');
  clearStorage();
}

function persist(){ try{ localStorage.setItem('simulado:bio', JSON.stringify({answers:state.answers, idx:state.idx, candidate:candidateInput.value})); }catch(e){} }
function clearStorage(){ try{ localStorage.removeItem('simulado:bio'); sessionStorage.clear(); }catch(e){} }
function escapeHtml(str){ return (str+'').replace(/[&<>"']/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m];}); }

// On load: try to detect session data
(function(){ try{ const saved = JSON.parse(localStorage.getItem('simulado:bio')||'null'); if(saved){ if(confirm('Existe uma sessão salva. Desejar retomar?')){ candidateInput.value = saved.candidate||''; state.answers = saved.answers || state.answers; start(); renderQuestion(saved.idx||0); } else { localStorage.removeItem('simulado:bio'); } } }catch(e){} })();

// Detect devtools via window size change (best-effort)
(function(){ let threshold=160; window.addEventListener('resize', function(){ if(window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold){ window._clearSessionAndKill(); } }); })();

</script>
</body>
</html>
