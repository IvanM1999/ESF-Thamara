<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="author" content="Ivan Montibeller">
    <meta name="description" content="ESF Thamara Katryne Rodrigues Schmidt - Unidade de SaÃºde da FamÃ­lia em Blumenau - SC">
    <meta name="keywords" content="ESF, SaÃºde da FamÃ­lia, Blumenau, SC, Unidade de SaÃºde, Thamara Katryne Rodrigues Schmidt, Atendimento MÃ©dico, SaÃºde ComunitÃ¡ria">
    <title>Assistente Virtual â€“ ESF Thamara</title>
<link rel="stylesheet" href="./css/xp-responsive.css"></head>
    <style>
        /* Estilos especÃ­ficos do Chat Profissional */
        .chat-wrapper { display: flex; flex-direction: column; height: 100%; }
        .chat-history { flex: 1; overflow-y: auto; padding: 20px; background: #fff; display: flex; flex-direction: column; gap: 12px; scroll-behavior: smooth; }
        .message { max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 15px; line-height: 1.5; position: relative; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .message.bot { align-self: flex-start; background: #f0f2f5; color: #1c1e21; border-bottom-left-radius: 4px; border: 1px solid #e4e6eb; }
        .message.user { align-self: flex-end; background: #0084ff; color: white; border-bottom-right-radius: 4px; }
        .chat-controls { padding: 15px; background: #f0f0f0; border-top: 1px solid #dcdcdc; display: flex; gap: 10px; align-items: center; }
        .chat-input { flex: 1; padding: 12px; border: 1px solid #ccc; border-radius: 24px; outline: none; font-size: 15px; transition: border-color 0.2s; }
        .chat-input:focus { border-color: #0084ff; box-shadow: 0 0 0 2px rgba(0,132,255,0.2); }
        .send-btn { background: #0084ff; color: white; border: none; padding: 10px 24px; border-radius: 24px; cursor: pointer; font-weight: 600; transition: background 0.2s; }
        .send-btn:hover { background: #0073e6; }
        .typing { font-size: 12px; color: #65676b; margin-left: 20px; margin-bottom: 5px; display: none; font-style: italic; }
        @keyframes popIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>


<body> 
  <!-- Barra de menus -->
  <div>
  <nav style="background:#0b5fa5; color:#fff; padding:10px; display:flex; justify-content:center; gap:20px; font-weight:bold;">
    <a href="/index.html" style="color:#fff; text-decoration:none;">ğŸ  InÃ­cio</a>
    <a href="./blog/agenda.html" style="color:#fff; text-decoration:none;">â„¹ï¸ Agenda</a>
    <a href="./equipe.html" style="color:#fff; text-decoration:none;">ğŸ‘©â€âš•ï¸ Nossa Equipe</a>
  </nav>
    </div>

<!-- CHATBOT INTERFACE -->
<div class="xp-window" style="max-width: 800px; margin: 20px auto; height: 70vh; display: flex; flex-direction: column;">
    <div class="xp-titlebar">ğŸ¤– Assistente Virtual â€” ESF Thamara</div>
    <div class="xp-content" style="flex: 1; padding: 0; overflow: hidden;">
        
        <div class="chat-wrapper">
            <div id="chatHistory" class="chat-history">
                <!-- Mensagem inicial -->
                <div class="message bot">
                    OlÃ¡! Sou a InteligÃªncia Artificial da ESF Thamara. ğŸ¥<br>
                    Posso ajudar com horÃ¡rios, endereÃ§o, vacinas ou dÃºvidas sobre a unidade.<br>
                    <strong>Como posso ajudar vocÃª hoje?</strong>
                </div>
            </div>
            
            <div id="typingIndicator" class="typing">Digitando...</div>
            
            <div class="chat-controls">
                <input type="text" id="userInput" class="chat-input" placeholder="Digite sua dÃºvida aqui..." autocomplete="off">
                <button id="sendBtn" class="send-btn">Enviar</button>
            </div>
        </div>

    </div>
</div>

<script>
    // --- LÃ“GICA DO CHATBOT (Open Source Logic) ---
    
    const chatHistory = document.getElementById('chatHistory');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const typingIndicator = document.getElementById('typingIndicator');

    // Base de Conhecimento (Simulando IA)
    // VocÃª pode expandir isso ou conectar a uma API real (ex: OpenAI, Ollama)
    const knowledgeBase = [
        { keys: ['ola', 'oi', 'bom dia', 'boa tarde', 'comeÃ§ar'], resp: "OlÃ¡! Tudo bem? Como posso ajudar vocÃª com a ESF Thamara hoje?" },
        { keys: ['horario', 'hora', 'abre', 'fecha', 'funcionamento'], resp: "ğŸ•’ **HorÃ¡rio de Atendimento:**<br>Segunda a Sexta: 07:00 Ã s 12:00 e 13:00 Ã s 16:00.<br>A unidade fecha para almoÃ§o ao meio-dia." },
        { keys: ['endereco', 'onde', 'local', 'fica', 'mapa'], resp: "ğŸ“ **EndereÃ§o:**<br>Rua Santa Maria, 2082 â€“ Bairro Progresso, Blumenau (SC).<br>CEP: 89027-202." },
        { keys: ['telefone', 'contato', 'ligar', 'numero'], resp: "ğŸ“ **Telefones:**<br>(47) 3381-7064<br>(47) 3381-6751" },
        { keys: ['vacina', 'vacinacao', 'campanha'], resp: "ğŸ’‰ **Sala de Vacinas:**<br>Funciona no mesmo horÃ¡rio da unidade. Lembre-se de trazer a carteirinha de vacinaÃ§Ã£o e o cartÃ£o do SUS!" },
        { keys: ['medico', 'consulta', 'agendar', 'marcar'], resp: "ğŸ‘¨â€âš•ï¸ **Consultas:**<br>O agendamento Ã© feito preferencialmente presencialmente na unidade. Para casos agudos, venha para a triagem (Acolhimento)." },
        { keys: ['dentista', 'odonto', 'dente'], resp: "ğŸ¦· **Odontologia:**<br>Temos atendimento odontolÃ³gico. Ã‰ necessÃ¡rio passar pela recepÃ§Ã£o para verificar a disponibilidade de agendamento." },
        { keys: ['triagem', 'dor', 'sintoma', 'mal'], resp: "âš ï¸ Se vocÃª estÃ¡ se sentindo mal, venha imediatamente Ã  unidade para passar pelo Acolhimento (Triagem). Em casos de emergÃªncia grave, ligue 192 (SAMU)." },
        { keys: ['quem', 'voce', 'bot', 'ia'], resp: "Eu sou o assistente virtual da ESF Thamara! Fui criado para facilitar o acesso Ã s informaÃ§Ãµes da unidade. ğŸ¤–" },
        { keys: ['obrigado', 'valeu', 'tchau'], resp: "Por nada! Cuide-se bem. ğŸ’™" }
    ];

    function findResponse(text) {
        text = text.toLowerCase();
        // Busca por palavras-chave
        for (let item of knowledgeBase) {
            if (item.keys.some(key => text.includes(key))) {
                return item.resp;
            }
        }
        // Resposta padrÃ£o
        return "Desculpe, ainda estou aprendendo e nÃ£o entendi sua dÃºvida. ğŸ˜•<br>Tente perguntar sobre **horÃ¡rios**, **endereÃ§o** ou **vacinas**.";
    }

    function addMessage(text, sender) {
        const div = document.createElement('div');
        div.className = `message ${sender}`;
        div.innerHTML = text;
        chatHistory.appendChild(div);
        chatHistory.scrollTop = chatHistory.scrollHeight;
    }

    async function handleUserMessage() {
        const text = userInput.value.trim();
        if (!text) return;

        // Adiciona msg do usuÃ¡rio
        addMessage(text, 'user');
        userInput.value = '';
        userInput.disabled = true;

        // Simula "pensando"
        typingIndicator.style.display = 'block';
        
        // Delay artificial para parecer natural (1s a 2s)
        const delay = Math.floor(Math.random() * 1000) + 800;
        
        setTimeout(() => {
            const response = findResponse(text);
            typingIndicator.style.display = 'none';
            addMessage(response, 'bot');
            userInput.disabled = false;
            userInput.focus();
        }, delay);
    }

    // Eventos
    sendBtn.addEventListener('click', handleUserMessage);
    userInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') handleUserMessage();
    });

    // Foco inicial
    setTimeout(() => userInput.focus(), 500);

</script>

</body>
</html>
